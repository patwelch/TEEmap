<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Map Application</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          crossorigin=""/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"
          crossorigin="anonymous" referrerpolicy="no-referrer" />   
</head>
<body>
    <div id="map"></div>

    <div id="message-box"></div>

    <div id="controls-panel">
        <fieldset>
            <legend>Drawing &amp; File I/O</legend>
            <div class="control-group">
                <button id="save-button">Save Features</button>
                <label for="load-input" class="file-label">Load Features</label>
                <input type="file" id="load-input" accept=".geojson,.json">
            </div>
        </fieldset>

        <!-- Arc url control group -->
        <fieldset>
            <legend>ArcGIS Layer</legend> 
            <div class="control-group">
                <label for="arcgis-url-input">ArcGIS Layer URL:</label>
                <div class="input-button-group">
                    <input type="text" id="arcgis-url-input" placeholder="Enter Feature Service URL...">
                    <button id="add-endpoint-button" title="Add current URL to Saved Endpoints">+</button>
                </div>
                <label for="saved-endpoints-select" style="margin-top: 5px;">Saved Endpoints:</label>
                <select id="saved-endpoints-select">
                    <option value="">-- Select Saved Endpoint --</option>
                    </select>
                <div class="button-row" style="margin-top: 5px;">
                    <button id="load-arcgis-button">Load Layer</button>
                    <button id="remove-arcgis-button" disabled>Remove Layer</button> <!-- New Button -->
                </div>
                <div class="button-row" style="margin-top: 5px;">
                    <button id="copy-selected-button" disabled>Copy Selected Feature</button>
                </div>
            </div>
        </fieldset>

        <!-- Complex Filter Control Group -->
        <fieldset>
            <legend>Complex Filter</legend>
            <div class="control-group">
                <label for="filter-field-select">Filter Field:</label>
                <select id="filter-field-select" disabled>
                    <option value="">-- Select Field --</option>
                </select>
                <div id="filter-conditions-container">
                    <!-- Filter conditions will be added here -->
                </div>
                <button id="add-filter-condition-button" disabled>Add Condition</button>
                <label for="filter-logic-select">Filter Logic:</label>
                <select id="filter-logic-select" disabled>
                    <option value="AND">AND</option>
                    <option value="OR">OR</option>
                </select>
                <button id="apply-filter-button" disabled>Apply Filter</button>
                <button id="clear-filter-button" disabled>Clear Filter</button>
            </div>
        </fieldset>

        <!-- New Color Control Group -->
        <fieldset>
            <legend>Layer Style</legend>
            <div class="control-group">
                <label for="color-picker">Change Layer Color:</label>
                <input type="color" id="color-picker" value="#E67E22" disabled>
                <button id="apply-color-button" disabled>Apply Color</button>
            </div>
        </fieldset>

    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            crossorigin=""></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script src="https://unpkg.com/esri-leaflet@3.0.10/dist/esri-leaflet.js"
            crossorigin=""></script>

    <script src="{{ url_for('static', filename='js/map_logic.js') }}"></script>
</body>
</html>